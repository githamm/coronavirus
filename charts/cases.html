<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex,follow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colorado U.S. Senate Tracker | The Denver Post</title>
    <link rel="shortcut icon" href="https://extras.mnginteractive.com/live/media/favIcon/dpo/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.14/c3.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.js"></script>
    <script src="https://extras.denverpost.com/foundation/js/vendor/modernizr.js"></script>
    <script src="https://extras.denverpost.com/app/homicide-report/js/d3.v3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.14/c3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>
    <script src="js/scripts.js"></script>
</head>

<body>
    <div id="quarterly-money-chart"></div>
    <script>
    var quarterlyRaisedSheet = 'https://docs.google.com/spreadsheets/d/1le-2tlErhBUQe3ya-H-c3YqCjdmwwSNWEvAHnshrP3E/edit#gid=0';
    // SHEET FOR TESTING PURPOSES
    // var quarterlyRaisedSheet = 'https://docs.google.com/spreadsheets/d/1tX1LfWkWM2-D4pfG6GpWk7f7JUvyiKOuf6UebNIt_wc/edit#gid=0';

    function init() {
        Tabletop.init({
            key: quarterlyRaisedSheet,
            callback: function(data, tabletop) {
                console.log(data);
                // var lastRow = (data.slice(-1)[0]);
                // var baerRaised = (lastRow.baer_raised).toLocaleString();
                // var brayRaised = (lastRow.bray_raised).toLocaleString();
                // var garciaRaised = (lastRow.garcia_raised).toLocaleString();
                // var gardnerRaised = (lastRow.gardner_raised).toLocaleString();
                // var hickenlooperRaised = (lastRow.hickenlooper_raised).toLocaleString();
                // var johnstonRaised = (lastRow.johnston_raised).toLocaleString();
                // var maddenRaised = (lastRow.madden_raised).toLocaleString();
                // var romanoffRaised = (lastRow.romanoff_raised).toLocaleString();
                // var spauldingRaised = (lastRow.spaulding_raised).toLocaleString();
                // var walshRaised = (lastRow.walsh_raised).toLocaleString();
                // var warrenRaised = (lastRow.warren_raised).toLocaleString();
                // var williamsRaised = (lastRow.williams_raised).toLocaleString();
                // var zornioRaised = (lastRow.zornio_raised).toLocaleString();

                var quarterlyMoneyChart = c3.generate({
                    bindto: '#quarterly-money-chart',
                    size: {
                        height: 425
                        //width: 800
                    },
                    data: {
                        json: data,
                        keys: {
                            // x: [ 'date0', 'date1', 'date2' ],
                            x: 'date',
                            value: ['daily_cases','cumulative_cases']
                        },
                        names: {
                            daily_cases: 'Daily cases',
                            cumulative_cases: 'Cumulative cases'
                        },
                        type: 'bar',
                        types: {
                            cumulative_cases: 'line'
                        },
                        colors: {
                            'daily_cases': '#6baed6',
                            'cumulative_cases': '#08519c',
                        },
                    },
                    padding: {
                        bottom: 25
                    },
                    axis: {
                        x: {
                            type: 'category',
                            tick: {
                                rotate: 0,
                                multiline: false,
                                culling: true
                            },
                            //count: 8
                        },
                        y: {
                            tick: {
                            },
                            // label: {
                            //     text: 'Money raised',
                            //     position: 'outer-middle'
                            // }
                        }
                    },
                    tooltip: {
                        format: {
                        }
                    },
                    grid: {
                        x: {
                            show: true
                        },
                        y: {
                            show: true
                        }
                    },
                    point: {
                        r: 4
                    }
                });
            },
            simpleSheet: true,
            parseNumbers: true
        });
    };

    window.addEventListener('DOMContentLoaded', init);
    </script>
</body>